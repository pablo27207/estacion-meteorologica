; PlatformIO Project Configuration File
; GIPIS - Estación Meteorológica
;
; Estructura:
;   firmware/shared/  - Configuración compartida
;   firmware/tx/      - Nodo transmisor (sensores)
;   firmware/rx/      - Nodo receptor (gateway)
;
; Comandos:
;   pio run -e tx_node           # Compilar TX
;   pio run -e rx_gateway        # Compilar RX
;   pio run -t upload -e tx_node # Subir a TX

[env]
platform = espressif32
board = heltec_wifi_lora_32_V3
framework = arduino
monitor_speed = 115200
src_dir = firmware
lib_deps =
    paulstoffregen/OneWire@^2.3.8
    milesburton/DallasTemperature@^3.11.0
    olikraus/U8g2@^2.35.19
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    jgromes/RadioLib@^7.1.2

; ============================================
; Nodo Transmisor (TX) - Sensores en campo
; ============================================
[env:tx_node]
build_src_filter = +<shared/*> +<tx/*>
build_flags =
    -DNODE_TYPE_TX

; ============================================
; Nodo Receptor (RX) - Gateway WiFi
; ============================================
[env:rx_gateway]
build_src_filter = +<shared/*> +<rx/*>
build_flags =
    -DNODE_TYPE_RX
lib_deps =
    ${env.lib_deps}
    esphome/ESPAsyncWebServer-esphome@^3.3.0
    esphome/AsyncTCP-esphome@^2.1.4
    bblanchon/ArduinoJson@^7.0.0